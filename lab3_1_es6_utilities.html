<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab 3-1: JavaScript ES6+ ì‹¤ì „ í™œìš©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #3498db;
            --secondary: #2c3e50;
            --success: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --light: #f8f9fa;
            --dark: #343a40;
            --border-radius: 8px;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 3rem;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .demo-card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
        }

        .demo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .demo-header {
            background: var(--primary);
            color: white;
            padding: 1.5rem;
            text-align: center;
        }

        .demo-header h3 {
            margin-bottom: 0.5rem;
        }

        .demo-content {
            padding: 1.5rem;
        }

        .code-block {
            background: #f4f4f4;
            border-left: 4px solid var(--primary);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }

        .result-box {
            background: var(--light);
            border: 1px solid #dee2e6;
            border-radius: var(--border-radius);
            padding: 1rem;
            margin: 1rem 0;
        }

        .result-box.success {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }

        .result-box.error {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1rem;
            transition: var(--transition);
            margin: 0.5rem 0.5rem 0.5rem 0;
        }

        .btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }

        .btn-success { background: var(--success); }
        .btn-danger { background: var(--danger); }
        .btn-warning { background: var(--warning); }

        .input-group {
            margin: 1rem 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .input-group input,
        .input-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
        }

        .input-group input:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        .array-demo {
            margin: 1rem 0;
        }

        .array-item {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 0.5rem 1rem;
            margin: 0.25rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .console-output {
            background: #1e1e1e;
            color: #00ff00;
            padding: 1rem;
            border-radius: var(--border-radius);
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 200px;
            overflow-y: auto;
            margin: 1rem 0;
        }

        .performance-meter {
            background: var(--light);
            border-radius: var(--border-radius);
            padding: 1rem;
            margin: 1rem 0;
        }

        .performance-bar {
            background: #e9ecef;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        .performance-fill {
            background: linear-gradient(90deg, var(--success), var(--warning), var(--danger));
            height: 100%;
            transition: width 1s ease;
            border-radius: 10px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .demo-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .demo-card {
            animation: fadeInUp 0.6s ease forwards;
        }

        .demo-card:nth-child(2) { animation-delay: 0.1s; }
        .demo-card:nth-child(3) { animation-delay: 0.2s; }
        .demo-card:nth-child(4) { animation-delay: 0.3s; }
        .demo-card:nth-child(5) { animation-delay: 0.4s; }
        .demo-card:nth-child(6) { animation-delay: 0.5s; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ JavaScript ES6+ ì‹¤ì „ í™œìš©</h1>
            <p>í˜„ëŒ€ì ì¸ JavaScript ë¬¸ë²•ê³¼ ê³ ê¸‰ ê¸°ë²•ì„ ë§ˆìŠ¤í„°í•˜ì„¸ìš”!</p>
        </div>

        <div class="demo-grid">
            <!-- ë°°ì—´ ê³ ê¸‰ ë©”ì„œë“œ ë°ëª¨ -->
            <div class="demo-card">
                <div class="demo-header">
                    <h3>ğŸ¯ ë°°ì—´ ê³ ê¸‰ ë©”ì„œë“œ</h3>
                    <p>map, filter, reduceì˜ ì‹¤ì „ í™œìš©</p>
                </div>
                <div class="demo-content">
                    <div class="input-group">
                        <label>ìˆ«ì ë°°ì—´ (ì‰¼í‘œë¡œ êµ¬ë¶„):</label>
                        <input type="text" id="numberArray" placeholder="1,2,3,4,5,6,7,8,9,10" value="1,2,3,4,5,6,7,8,9,10">
                    </div>
                    
                    <button class="btn" onclick="demoArrayMethods()">ë°°ì—´ ë©”ì„œë“œ ì‹¤í–‰</button>
                    <button class="btn btn-success" onclick="demoChaining()">ë©”ì„œë“œ ì²´ì´ë‹</button>
                    
                    <div id="arrayResults" class="result-box"></div>
                    
                    <div class="code-block">
// ES6+ ë°°ì—´ ë©”ì„œë“œ ì˜ˆì œ
const numbers = [1,2,3,4,5,6,7,8,9,10];

// ì¡°ê±´ë¶€ í•„í„°ë§ + ë³€í™˜ + ì§‘ê³„
const result = numbers
  .filter(n => n % 2 === 0)      // ì§ìˆ˜ë§Œ
  .map(n => n ** 2)              // ì œê³±
  .reduce((sum, n) => sum + n, 0); // í•©ê³„
                    </div>
                </div>
            </div>

            <!-- êµ¬ì¡°ë¶„í•´ í• ë‹¹ ë°ëª¨ -->
            <div class="demo-card">
                <div class="demo-header">
                    <h3>ğŸ“¦ êµ¬ì¡°ë¶„í•´ í• ë‹¹</h3>
                    <p>ê°ì²´ì™€ ë°°ì—´ì˜ íš¨ìœ¨ì ì¸ ë°ì´í„° ì¶”ì¶œ</p>
                </div>
                <div class="demo-content">
                    <div class="input-group">
                        <label>ì‚¬ìš©ì ì •ë³´ (JSON):</label>
                        <textarea id="userJson" rows="5">
{
  "name": "ê¹€ê°œë°œ",
  "age": 28,
  "skills": ["JavaScript", "React", "Node.js"],
  "address": {
    "city": "ì„œìš¸",
    "district": "ê°•ë‚¨êµ¬"
  },
  "projects": [
    {"name": "ì‡¼í•‘ëª°", "tech": "React"},
    {"name": "ë¸”ë¡œê·¸", "tech": "Vue.js"}
  ]
}
                        </textarea>
                    </div>
                    
                    <button class="btn" onclick="demoDestructuring()">êµ¬ì¡°ë¶„í•´ ì‹¤í–‰</button>
                    <button class="btn btn-warning" onclick="demoAdvancedDestructuring()">ê³ ê¸‰ íŒ¨í„´</button>
                    
                    <div id="destructuringResults" class="result-box"></div>
                    
                    <div class="code-block">
// êµ¬ì¡°ë¶„í•´ í• ë‹¹ ê³ ê¸‰ íŒ¨í„´
const { name, skills: [mainSkill, ...otherSkills] } = user;
const { address: { city }, projects: [firstProject] } = user;
                    </div>
                </div>
            </div>

            <!-- Promiseì™€ async/await ë°ëª¨ -->
            <div class="demo-card">
                <div class="demo-header">
                    <h3>âš¡ ë¹„ë™ê¸° ì²˜ë¦¬</h3>
                    <p>Promise, async/await, ë³‘ë ¬ ì²˜ë¦¬</p>
                </div>
                <div class="demo-content">
                    <div class="input-group">
                        <label>API ì§€ì—° ì‹œê°„ (ms):</label>
                        <input type="number" id="delayTime" value="1000" min="100" max="5000">
                    </div>
                    
                    <button class="btn" onclick="demoPromises()">Promise ì²´ì¸</button>
                    <button class="btn btn-success" onclick="demoAsyncAwait()">Async/Await</button>
                    <button class="btn btn-warning" onclick="demoParallel()">ë³‘ë ¬ ì²˜ë¦¬</button>
                    
                    <div id="asyncResults" class="result-box"></div>
                    
                    <div class="performance-meter">
                        <label>ì‹¤í–‰ ì‹œê°„:</label>
                        <div class="performance-bar">
                            <div id="performanceBar" class="performance-fill" style="width: 0%"></div>
                        </div>
                        <span id="performanceText">0ms</span>
                    </div>
                    
                    <div class="code-block">
// ë³‘ë ¬ ë¹„ë™ê¸° ì²˜ë¦¬
const results = await Promise.allSettled([
  fetchUserData(1),
  fetchUserData(2),
  fetchUserData(3)
]);
                    </div>
                </div>
            </div>

            <!-- í´ë˜ìŠ¤ì™€ ëª¨ë“ˆ ë°ëª¨ -->
            <div class="demo-card">
                <div class="demo-header">
                    <h3>ğŸ—ï¸ í´ë˜ìŠ¤ì™€ ìƒì†</h3>
                    <p>ES6 í´ë˜ìŠ¤, ìƒì†, static ë©”ì„œë“œ</p>
                </div>
                <div class="demo-content">
                    <div class="input-group">
                        <label>ê°œë°œì ì´ë¦„:</label>
                        <input type="text" id="devName" placeholder="ê¹€ê°œë°œ" value="ê¹€ê°œë°œ">
                    </div>
                    
                    <div class="input-group">
                        <label>ì „ë¬¸ ë¶„ì•¼:</label>
                        <input type="text" id="devSpecialty" placeholder="Frontend, Backend, FullStack" value="FullStack">
                    </div>
                    
                    <button class="btn" onclick="demoClasses()">í´ë˜ìŠ¤ ìƒì„±</button>
                    <button class="btn btn-success" onclick="demoInheritance()">ìƒì† ë°ëª¨</button>
                    
                    <div id="classResults" class="result-box"></div>
                    
                    <div class="code-block">
// ES6 í´ë˜ìŠ¤ì™€ ìƒì†
class Developer {
  constructor(name, specialty) {
    this.name = name;
    this.specialty = specialty;
  }
  
  static getSkillLevel(years) {
    return years >= 5 ? 'Senior' : 'Junior';
  }
}

class FullStackDeveloper extends Developer {
  constructor(name) {
    super(name, 'FullStack');
    this.skills = ['Frontend', 'Backend'];
  }
}
                    </div>
                </div>
            </div>

            <!-- ê³ ê¸‰ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° -->
            <div class="demo-card">
                <div class="demo-header">
                    <h3>ğŸ§® í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°</h3>
                    <p>ê³ ì°¨í•¨ìˆ˜, ì»¤ë§, ë©”ëª¨ì´ì œì´ì…˜</p>
                </div>
                <div class="demo-content">
                    <div class="input-group">
                        <label>ê³„ì‚°í•  ìˆ«ì:</label>
                        <input type="number" id="calcNumber" value="10" min="1" max="50">
                    </div>
                    
                    <button class="btn" onclick="demoHigherOrder()">ê³ ì°¨í•¨ìˆ˜</button>
                    <button class="btn btn-success" onclick="demoCurrying()">ì»¤ë§</button>
                    <button class="btn btn-warning" onclick="demoMemoization()">ë©”ëª¨ì´ì œì´ì…˜</button>
                    
                    <div id="functionalResults" class="result-box"></div>
                    
                    <div class="console-output" id="functionalConsole"></div>
                    
                    <div class="code-block">
// ë©”ëª¨ì´ì œì´ì…˜ íŒ¨í„´
const memoize = (fn) => {
  const cache = new Map();
  return (...args) => {
    const key = JSON.stringify(args);
    if (cache.has(key)) return cache.get(key);
    const result = fn(...args);
    cache.set(key, result);
    return result;
  };
};
                    </div>
                </div>
            </div>

            <!-- ì‹¤ì‹œê°„ ë°ì´í„° ì²˜ë¦¬ -->
            <div class="demo-card">
                <div class="demo-header">
                    <h3>ğŸ“Š ì‹¤ì‹œê°„ ë°ì´í„° ì²˜ë¦¬</h3>
                    <p>Observable, Proxy, WeakMap í™œìš©</p>
                </div>
                <div class="demo-content">
                    <button class="btn" onclick="demoProxy()">Proxy íŒ¨í„´</button>
                    <button class="btn btn-success" onclick="demoObservable()">Observable</button>
                    <button class="btn btn-warning" onclick="demoWeakMap()">WeakMap ìºì‹œ</button>
                    
                    <div id="advancedResults" class="result-box"></div>
                    
                    <div class="array-demo" id="proxyDemo"></div>
                    
                    <div class="code-block">
// Proxyë¥¼ í™œìš©í•œ ë°˜ì‘í˜• ê°ì²´
const createReactive = (obj, callback) => {
  return new Proxy(obj, {
    set(target, key, value) {
      const oldValue = target[key];
      target[key] = value;
      callback(key, value, oldValue);
      return true;
    }
  });
};
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        const log = (message, target = 'console') => {
            const element = document.getElementById(target);
            if (element) {
                element.innerHTML += `<div>${new Date().toLocaleTimeString()}: ${message}</div>`;
                element.scrollTop = element.scrollHeight;
            }
            console.log(message);
        };

        const clearResults = (id) => {
            document.getElementById(id).innerHTML = '';
        };

        const showResult = (id, content, type = '') => {
            const element = document.getElementById(id);
            element.className = `result-box ${type}`;
            element.innerHTML = content;
        };

        // 1. ë°°ì—´ ê³ ê¸‰ ë©”ì„œë“œ ë°ëª¨
        function demoArrayMethods() {
            const input = document.getElementById('numberArray').value;
            const numbers = input.split(',').map(n => parseInt(n.trim())).filter(n => !isNaN(n));
            
            const results = {
                original: numbers,
                doubled: numbers.map(n => n * 2),
                evens: numbers.filter(n => n % 2 === 0),
                sum: numbers.reduce((sum, n) => sum + n, 0),
                max: Math.max(...numbers),
                average: numbers.reduce((sum, n) => sum + n, 0) / numbers.length
            };
            
            showResult('arrayResults', `
                <h4>ğŸ“Š ë°°ì—´ ì²˜ë¦¬ ê²°ê³¼</h4>
                <p><strong>ì›ë³¸:</strong> [${results.original.join(', ')}]</p>
                <p><strong>2ë°°:</strong> [${results.doubled.join(', ')}]</p>
                <p><strong>ì§ìˆ˜:</strong> [${results.evens.join(', ')}]</p>
                <p><strong>í•©ê³„:</strong> ${results.sum}</p>
                <p><strong>ìµœëŒ“ê°’:</strong> ${results.max}</p>
                <p><strong>í‰ê· :</strong> ${results.average.toFixed(2)}</p>
            `, 'success');
        }

        function demoChaining() {
            const input = document.getElementById('numberArray').value;
            const numbers = input.split(',').map(n => parseInt(n.trim())).filter(n => !isNaN(n));
            
            // ë³µì¡í•œ ë©”ì„œë“œ ì²´ì´ë‹ ì˜ˆì œ
            const result = numbers
                .filter(n => n > 3)                    // 3ë³´ë‹¤ í° ìˆ˜
                .map(n => ({ value: n, square: n ** 2 })) // ê°ì²´ë¡œ ë³€í™˜
                .filter(obj => obj.square % 2 === 0)    // ì œê³±ì´ ì§ìˆ˜ì¸ ê²ƒ
                .reduce((acc, obj) => {                 // ì§‘ê³„
                    acc.sum += obj.value;
                    acc.items.push(obj);
                    return acc;
                }, { sum: 0, items: [] });
            
            showResult('arrayResults', `
                <h4>ğŸ”— ë©”ì„œë“œ ì²´ì´ë‹ ê²°ê³¼</h4>
                <p><strong>ì¡°ê±´:</strong> 3ë³´ë‹¤ í¬ê³ , ì œê³±ì´ ì§ìˆ˜ì¸ ìˆ˜</p>
                <p><strong>í•©ê³„:</strong> ${result.sum}</p>
                <p><strong>ì²˜ë¦¬ëœ í•­ëª©:</strong></p>
                <ul>
                    ${result.items.map(item => 
                        `<li>${item.value} â†’ ${item.square}</li>`
                    ).join('')}
                </ul>
            `, 'success');
        }

        // 2. êµ¬ì¡°ë¶„í•´ í• ë‹¹ ë°ëª¨
        function demoDestructuring() {
            try {
                const userJson = document.getElementById('userJson').value;
                const user = JSON.parse(userJson);
                
                // ê¸°ë³¸ êµ¬ì¡°ë¶„í•´
                const { name, age, skills } = user;
                const { address: { city, district } } = user;
                const [firstSkill, secondSkill, ...otherSkills] = skills;
                
                showResult('destructuringResults', `
                    <h4>ğŸ“¦ ê¸°ë³¸ êµ¬ì¡°ë¶„í•´ ê²°ê³¼</h4>
                    <p><strong>ì´ë¦„:</strong> ${name}</p>
                    <p><strong>ë‚˜ì´:</strong> ${age}</p>
                    <p><strong>ë„ì‹œ:</strong> ${city}, ${district}</p>
                    <p><strong>ì£¼ìš” ìŠ¤í‚¬:</strong> ${firstSkill}</p>
                    <p><strong>ë³´ì¡° ìŠ¤í‚¬:</strong> ${secondSkill}</p>
                    <p><strong>ê¸°íƒ€ ìŠ¤í‚¬:</strong> [${otherSkills.join(', ')}]</p>
                `, 'success');
            } catch (error) {
                showResult('destructuringResults', `
                    <h4>âŒ JSON íŒŒì‹± ì˜¤ë¥˜</h4>
                    <p>${error.message}</p>
                `, 'error');
            }
        }

        function demoAdvancedDestructuring() {
            try {
                const userJson = document.getElementById('userJson').value;
                const user = JSON.parse(userJson);
                
                // ê³ ê¸‰ êµ¬ì¡°ë¶„í•´ íŒ¨í„´
                const { 
                    name: userName, 
                    skills: [mainSkill, ...restSkills], 
                    projects: [{ name: firstProjectName, tech: firstTech }],
                    address: { city = 'ë¯¸ì •', country = 'ëŒ€í•œë¯¼êµ­' } = {}
                } = user;
                
                // í•¨ìˆ˜ ë§¤ê°œë³€ìˆ˜ êµ¬ì¡°ë¶„í•´
                const analyzeUser = ({ name, skills, age }) => ({
                    isExperienced: age >= 25,
                    skillCount: skills.length,
                    profile: `${name}ì€(ëŠ”) ${skills.join(', ')}ì— ëŠ¥ìˆ™í•©ë‹ˆë‹¤.`
                });
                
                const analysis = analyzeUser(user);
                
                showResult('destructuringResults', `
                    <h4>ğŸ”§ ê³ ê¸‰ êµ¬ì¡°ë¶„í•´ ê²°ê³¼</h4>
                    <p><strong>ì‚¬ìš©ìëª…:</strong> ${userName}</p>
                    <p><strong>ì£¼ ìŠ¤í‚¬:</strong> ${mainSkill}</p>
                    <p><strong>ê¸°íƒ€ ìŠ¤í‚¬:</strong> [${restSkills.join(', ')}]</p>
                    <p><strong>ì²« ë²ˆì§¸ í”„ë¡œì íŠ¸:</strong> ${firstProjectName} (${firstTech})</p>
                    <p><strong>ìœ„ì¹˜:</strong> ${city}, ${country}</p>
                    <p><strong>ê²½í—˜ ì—¬ë¶€:</strong> ${analysis.isExperienced ? 'ê²½í—˜ì' : 'ì‹ ì…'}</p>
                    <p><strong>í”„ë¡œí•„:</strong> ${analysis.profile}</p>
                `, 'success');
            } catch (error) {
                showResult('destructuringResults', `
                    <h4>âŒ ì²˜ë¦¬ ì˜¤ë¥˜</h4>
                    <p>${error.message}</p>
                `, 'error');
            }
        }

        // 3. ë¹„ë™ê¸° ì²˜ë¦¬ ë°ëª¨
        const simulateAPI = (data, delay) => {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    if (Math.random() > 0.1) { // 90% ì„±ê³µë¥ 
                        resolve({ status: 'success', data, timestamp: Date.now() });
                    } else {
                        reject(new Error('API í˜¸ì¶œ ì‹¤íŒ¨'));
                    }
                }, delay);
            });
        };

        function demoPromises() {
            const delay = parseInt(document.getElementById('delayTime').value);
            const startTime = Date.now();
            
            showResult('asyncResults', '<p>â³ Promise ì²´ì¸ ì‹¤í–‰ ì¤‘...</p>');
            
            simulateAPI('ì‚¬ìš©ì ë°ì´í„°', delay)
                .then(result => {
                    console.log('1ë‹¨ê³„ ì™„ë£Œ:', result);
                    return simulateAPI('í”„ë¡œí•„ ë°ì´í„°', delay / 2);
                })
                .then(result => {
                    console.log('2ë‹¨ê³„ ì™„ë£Œ:', result);
                    return simulateAPI('ì„¤ì • ë°ì´í„°', delay / 3);
                })
                .then(result => {
                    const endTime = Date.now();
                    const duration = endTime - startTime;
                    
                    showResult('asyncResults', `
                        <h4>âœ… Promise ì²´ì¸ ì™„ë£Œ</h4>
                        <p><strong>ì´ ì‹¤í–‰ ì‹œê°„:</strong> ${duration}ms</p>
                        <p><strong>ë§ˆì§€ë§‰ ê²°ê³¼:</strong> ${JSON.stringify(result, null, 2)}</p>
                    `, 'success');
                    
                    updatePerformance(duration, delay * 2);
                })
                .catch(error => {
                    showResult('asyncResults', `
                        <h4>âŒ Promise ì²´ì¸ ì‹¤íŒ¨</h4>
                        <p>${error.message}</p>
                    `, 'error');
                });
        }

        async function demoAsyncAwait() {
            const delay = parseInt(document.getElementById('delayTime').value);
            const startTime = Date.now();
            
            showResult('asyncResults', '<p>â³ Async/Await ì‹¤í–‰ ì¤‘...</p>');
            
            try {
                const step1 = await simulateAPI('ì‚¬ìš©ì ë°ì´í„°', delay);
                console.log('1ë‹¨ê³„ ì™„ë£Œ:', step1);
                
                const step2 = await simulateAPI('í”„ë¡œí•„ ë°ì´í„°', delay / 2);
                console.log('2ë‹¨ê³„ ì™„ë£Œ:', step2);
                
                const step3 = await simulateAPI('ì„¤ì • ë°ì´í„°', delay / 3);
                console.log('3ë‹¨ê³„ ì™„ë£Œ:', step3);
                
                const endTime = Date.now();
                const duration = endTime - startTime;
                
                showResult('asyncResults', `
                    <h4>âœ… Async/Await ì™„ë£Œ</h4>
                    <p><strong>ì´ ì‹¤í–‰ ì‹œê°„:</strong> ${duration}ms</p>
                    <p><strong>ì²˜ë¦¬ ë‹¨ê³„:</strong> 3ë‹¨ê³„ ìˆœì°¨ ì‹¤í–‰</p>
                    <p><strong>ìµœì¢… ë°ì´í„°:</strong> ${step3.data}</p>
                `, 'success');
                
                updatePerformance(duration, delay * 2);
            } catch (error) {
                showResult('asyncResults', `
                    <h4>âŒ Async/Await ì‹¤íŒ¨</h4>
                    <p>${error.message}</p>
                `, 'error');
            }
        }

        async function demoParallel() {
            const delay = parseInt(document.getElementById('delayTime').value);
            const startTime = Date.now();
            
            showResult('asyncResults', '<p>â³ ë³‘ë ¬ ì²˜ë¦¬ ì‹¤í–‰ ì¤‘...</p>');
            
            try {
                const promises = [
                    simulateAPI('ì‚¬ìš©ì 1', delay),
                    simulateAPI('ì‚¬ìš©ì 2', delay),
                    simulateAPI('ì‚¬ìš©ì 3', delay)
                ];
                
                const results = await Promise.allSettled(promises);
                const endTime = Date.now();
                const duration = endTime - startTime;
                
                const successful = results.filter(r => r.status === 'fulfilled').length;
                const failed = results.filter(r => r.status === 'rejected').length;
                
                showResult('asyncResults', `
                    <h4>ğŸš€ ë³‘ë ¬ ì²˜ë¦¬ ì™„ë£Œ</h4>
                    <p><strong>ì‹¤í–‰ ì‹œê°„:</strong> ${duration}ms (ìˆœì°¨ ëŒ€ë¹„ ${Math.round((delay * 3) / duration * 100)}% ë¹ ë¦„)</p>
                    <p><strong>ì„±ê³µ:</strong> ${successful}ê°œ, <strong>ì‹¤íŒ¨:</strong> ${failed}ê°œ</p>
                    <p><strong>ê²°ê³¼:</strong></p>
                    <ul>
                        ${results.map((result, index) => 
                            `<li>ì‚¬ìš©ì ${index + 1}: ${result.status === 'fulfilled' ? 'âœ… ì„±ê³µ' : 'âŒ ì‹¤íŒ¨'}</li>`
                        ).join('')}
                    </ul>
                `, 'success');
                
                updatePerformance(duration, delay);
            } catch (error) {
                showResult('asyncResults', `
                    <h4>âŒ ë³‘ë ¬ ì²˜ë¦¬ ì‹¤íŒ¨</h4>
                    <p>${error.message}</p>
                `, 'error');
            }
        }

        function updatePerformance(actual, expected) {
            const percentage = Math.min((actual / expected) * 100, 100);
            const bar = document.getElementById('performanceBar');
            const text = document.getElementById('performanceText');
            
            bar.style.width = percentage + '%';
            text.textContent = `${actual}ms`;
        }

        // 4. í´ë˜ìŠ¤ì™€ ìƒì† ë°ëª¨
        class Developer {
            constructor(name, specialty) {
                this.name = name;
                this.specialty = specialty;
                this.projects = [];
                this.experience = 0;
            }
            
            addProject(project) {
                this.projects.push(project);
                this.experience += 0.5;
            }
            
            getLevel() {
                if (this.experience >= 5) return 'Senior';
                if (this.experience >= 2) return 'Mid-level';
                return 'Junior';
            }
            
            static compareExperience(dev1, dev2) {
                return dev2.experience - dev1.experience;
            }
            
            toString() {
                return `${this.name} (${this.specialty}) - ${this.getLevel()}`;
            }
        }

        class FullStackDeveloper extends Developer {
            constructor(name) {
                super(name, 'FullStack');
                this.frontendSkills = [];
                this.backendSkills = [];
            }
            
            addSkill(skill, type = 'frontend') {
                if (type === 'frontend') {
                    this.frontendSkills.push(skill);
                } else {
                    this.backendSkills.push(skill);
                }
            }
            
            getSkillSummary() {
                return {
                    frontend: this.frontendSkills,
                    backend: this.backendSkills,
                    total: this.frontendSkills.length + this.backendSkills.length
                };
            }
        }

        function demoClasses() {
            const name = document.getElementById('devName').value || 'ê¹€ê°œë°œ';
            const specialty = document.getElementById('devSpecialty').value || 'FullStack';
            
            const dev = new Developer(name, specialty);
            dev.addProject('ì‡¼í•‘ëª° í”„ë¡œì íŠ¸');
            dev.addProject('ë¸”ë¡œê·¸ ì‹œìŠ¤í…œ');
            dev.addProject('ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ');
            
            showResult('classResults', `
                <h4>ğŸ‘©â€ğŸ’» ê°œë°œì í´ë˜ìŠ¤ ìƒì„±</h4>
                <p><strong>ê°œë°œì:</strong> ${dev.toString()}</p>
                <p><strong>ê²½í—˜ì¹˜:</strong> ${dev.experience}ë…„</p>
                <p><strong>ë ˆë²¨:</strong> ${dev.getLevel()}</p>
                <p><strong>í”„ë¡œì íŠ¸:</strong> ${dev.projects.join(', ')}</p>
            `, 'success');
        }

        function demoInheritance() {
            const name = document.getElementById('devName').value || 'ê¹€ê°œë°œ';
            
            const fullStackDev = new FullStackDeveloper(name);
            fullStackDev.addSkill('React', 'frontend');
            fullStackDev.addSkill('Vue.js', 'frontend');
            fullStackDev.addSkill('Node.js', 'backend');
            fullStackDev.addSkill('Spring Boot', 'backend');
            fullStackDev.addProject('E-commerce Platform');
            fullStackDev.addProject('Real-time Chat App');
            
            const skills = fullStackDev.getSkillSummary();
            
            showResult('classResults', `
                <h4>ğŸ¯ í’€ìŠ¤íƒ ê°œë°œì (ìƒì†)</h4>
                <p><strong>ê°œë°œì:</strong> ${fullStackDev.toString()}</p>
                <p><strong>í”„ë¡ íŠ¸ì—”ë“œ ìŠ¤í‚¬:</strong> ${skills.frontend.join(', ')}</p>
                <p><strong>ë°±ì—”ë“œ ìŠ¤í‚¬:</strong> ${skills.backend.join(', ')}</p>
                <p><strong>ì´ ìŠ¤í‚¬ ìˆ˜:</strong> ${skills.total}ê°œ</p>
                <p><strong>ê²½í—˜ì¹˜:</strong> ${fullStackDev.experience}ë…„</p>
                <p><strong>instanceof í™•ì¸:</strong> ${fullStackDev instanceof Developer ? 'âœ…' : 'âŒ'}</p>
            `, 'success');
        }

        // 5. í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ë°ëª¨
        function demoHigherOrder() {
            const num = parseInt(document.getElementById('calcNumber').value);
            clearResults('functionalConsole');
            
            // ê³ ì°¨í•¨ìˆ˜ ì˜ˆì œ
            const createMultiplier = (factor) => (x) => x * factor;
            const createValidator = (condition) => (value) => condition(value);
            
            const double = createMultiplier(2);
            const triple = createMultiplier(3);
            const isEven = createValidator(x => x % 2 === 0);
            const isPositive = createValidator(x => x > 0);
            
            const numbers = Array.from({length: num}, (_, i) => i + 1);
            const results = numbers.map(n => ({
                original: n,
                doubled: double(n),
                tripled: triple(n),
                isEven: isEven(n),
                isPositive: isPositive(n)
            }));
            
            log(`ê³ ì°¨í•¨ìˆ˜ ì‹¤í–‰ ê²°ê³¼ (${num}ê°œ í•­ëª©):`, 'functionalConsole');
            results.slice(0, 5).forEach(r => {
                log(`${r.original} â†’ 2ë°°: ${r.doubled}, 3ë°°: ${r.tripled}, ì§ìˆ˜: ${r.isEven}, ì–‘ìˆ˜: ${r.isPositive}`, 'functionalConsole');
            });
            
            showResult('functionalResults', `
                <h4>ğŸ”§ ê³ ì°¨í•¨ìˆ˜ ì‹¤í–‰ ì™„ë£Œ</h4>
                <p>createMultiplierì™€ createValidator íŒ©í† ë¦¬ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ${num}ê°œ ìˆ«ìë¥¼ ì²˜ë¦¬í–ˆìŠµë‹ˆë‹¤.</p>
            `, 'success');
        }

        function demoCurrying() {
            const num = parseInt(document.getElementById('calcNumber').value);
            clearResults('functionalConsole');
            
            // ì»¤ë§ ì˜ˆì œ
            const curriedAdd = (a) => (b) => (c) => a + b + c;
            const curriedMultiply = (a) => (b) => (c) => a * b * c;
            
            // ë¶€ë¶„ ì ìš©
            const add5 = curriedAdd(5);
            const add5And3 = add5(3);
            
            const multiply2 = curriedMultiply(2);
            const multiply2And3 = multiply2(3);
            
            log('ì»¤ë§ í•¨ìˆ˜ ì‹¤í–‰:', 'functionalConsole');
            log(`curriedAdd(5)(3)(${num}) = ${add5And3(num)}`, 'functionalConsole');
            log(`curriedMultiply(2)(3)(${num}) = ${multiply2And3(num)}`, 'functionalConsole');
            
            // ì‹¤ìš©ì ì¸ ì»¤ë§ ì˜ˆì œ
            const fetchData = (method) => (url) => (data) => {
                return `${method} ìš”ì²­ì„ ${url}ì— ${JSON.stringify(data)} ë°ì´í„°ë¡œ ì „ì†¡`;
            };
            
            const get = fetchData('GET');
            const post = fetchData('POST');
            const getUserData = get('/api/users');
            const createUser = post('/api/users');
            
            log(getUserData({ id: num }), 'functionalConsole');
            log(createUser({ name: 'ìƒˆ ì‚¬ìš©ì' }), 'functionalConsole');
            
            showResult('functionalResults', `
                <h4>ğŸ› ì»¤ë§ íŒ¨í„´ ì™„ë£Œ</h4>
                <p>í•¨ìˆ˜ì˜ ë¶€ë¶„ ì ìš©ì„ í†µí•´ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í•¨ìˆ˜ë“¤ì„ ìƒì„±í–ˆìŠµë‹ˆë‹¤.</p>
            `, 'success');
        }

        function demoMemoization() {
            const num = parseInt(document.getElementById('calcNumber').value);
            clearResults('functionalConsole');
            
            // ë©”ëª¨ì´ì œì´ì…˜ êµ¬í˜„
            const memoize = (fn) => {
                const cache = new Map();
                return (...args) => {
                    const key = JSON.stringify(args);
                    if (cache.has(key)) {
                        log(`ğŸ’¾ ìºì‹œì—ì„œ ë°˜í™˜: ${key}`, 'functionalConsole');
                        return cache.get(key);
                    }
                    log(`ğŸ”„ ìƒˆë¡œ ê³„ì‚°: ${key}`, 'functionalConsole');
                    const result = fn(...args);
                    cache.set(key, result);
                    return result;
                };
            };
            
            // í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´ (ë¹„íš¨ìœ¨ì  ì¬ê·€)
            const fibonacci = (n) => {
                if (n <= 1) return n;
                return fibonacci(n - 1) + fibonacci(n - 2);
            };
            
            const memoizedFibonacci = memoize(fibonacci);
            
            const startTime = performance.now();
            const result1 = memoizedFibonacci(num);
            const firstTime = performance.now() - startTime;
            
            const start2 = performance.now();
            const result2 = memoizedFibonacci(num); // ìºì‹œì—ì„œ ë°˜í™˜
            const secondTime = performance.now() - start2;
            
            log(`fibonacci(${num}) = ${result1}`, 'functionalConsole');
            log(`ì²« ë²ˆì§¸ ì‹¤í–‰: ${firstTime.toFixed(2)}ms`, 'functionalConsole');
            log(`ë‘ ë²ˆì§¸ ì‹¤í–‰: ${secondTime.toFixed(2)}ms (${Math.round(firstTime / secondTime)}ë°° ë¹ ë¦„)`, 'functionalConsole');
            
            showResult('functionalResults', `
                <h4>ğŸ§  ë©”ëª¨ì´ì œì´ì…˜ ì™„ë£Œ</h4>
                <p>ìºì‹±ì„ í†µí•´ ${Math.round(firstTime / secondTime)}ë°°ì˜ ì„±ëŠ¥ í–¥ìƒì„ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤.</p>
            `, 'success');
        }

        // 6. ê³ ê¸‰ ê¸°ëŠ¥ ë°ëª¨
        function demoProxy() {
            clearResults('proxyDemo');
            
            const target = { count: 0, name: 'Counter' };
            
            const reactiveProxy = new Proxy(target, {
                set(obj, key, value) {
                    const oldValue = obj[key];
                    obj[key] = value;
                    
                    // UI ì—…ë°ì´íŠ¸
                    const proxyDemo = document.getElementById('proxyDemo');
                    proxyDemo.innerHTML += `<div class="array-item">${key}: ${oldValue} â†’ ${value}</div>`;
                    
                    console.log(`ğŸ”„ Proxy: ${key} ë³€ê²½ë¨ (${oldValue} â†’ ${value})`);
                    return true;
                },
                
                get(obj, key) {
                    console.log(`ğŸ‘ï¸ Proxy: ${key} ì†ì„± ì ‘ê·¼ë¨`);
                    return obj[key];
                }
            });
            
            // í…ŒìŠ¤íŠ¸
            reactiveProxy.count = 1;
            reactiveProxy.count = 2;
            reactiveProxy.name = 'Advanced Counter';
            reactiveProxy.count += 3;
            
            showResult('advancedResults', `
                <h4>ğŸ” Proxy íŒ¨í„´ ì™„ë£Œ</h4>
                <p>ê°ì²´ì˜ ì†ì„± ë³€ê²½ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°ì§€í•˜ê³  UIë¥¼ ì—…ë°ì´íŠ¸í–ˆìŠµë‹ˆë‹¤.</p>
            `, 'success');
        }

        function demoObservable() {
            // ê°„ë‹¨í•œ Observable êµ¬í˜„
            class SimpleObservable {
                constructor() {
                    this.observers = [];
                }
                
                subscribe(callback) {
                    this.observers.push(callback);
                    return () => {
                        this.observers = this.observers.filter(obs => obs !== callback);
                    };
                }
                
                next(value) {
                    this.observers.forEach(callback => callback(value));
                }
            }
            
            const dataStream = new SimpleObservable();
            const results = [];
            
            // êµ¬ë…ìë“¤
            const unsubscribe1 = dataStream.subscribe(data => {
                results.push(`Observer 1: ${data}`);
            });
            
            const unsubscribe2 = dataStream.subscribe(data => {
                results.push(`Observer 2: ${data.toUpperCase()}`);
            });
            
            // ë°ì´í„° ìŠ¤íŠ¸ë¦¼
            ['hello', 'world', 'observable', 'pattern'].forEach((word, index) => {
                setTimeout(() => {
                    dataStream.next(word);
                    
                    if (index === 3) {
                        showResult('advancedResults', `
                            <h4>ğŸ“¡ Observable íŒ¨í„´ ì™„ë£Œ</h4>
                            <p>ë°ì´í„° ìŠ¤íŠ¸ë¦¼ì„ ê´€ì°°í•˜ëŠ” íŒ¨í„´ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤:</p>
                            <ul>
                                ${results.map(r => `<li>${r}</li>`).join('')}
                            </ul>
                        `, 'success');
                    }
                }, index * 500);
            });
        }

        function demoWeakMap() {
            // WeakMap ìºì‹œ ì˜ˆì œ
            const cache = new WeakMap();
            
            class ExpensiveCalculation {
                constructor(data) {
                    this.data = data;
                }
                
                process() {
                    // ë¬´ê±°ìš´ ê³„ì‚° ì‹œë®¬ë ˆì´ì…˜
                    return this.data.reduce((acc, val) => acc + val * val, 0);
                }
            }
            
            const getCachedResult = (obj) => {
                if (cache.has(obj)) {
                    console.log('ğŸ’¾ WeakMap ìºì‹œì—ì„œ ë°˜í™˜');
                    return cache.get(obj);
                }
                
                console.log('ğŸ”„ ìƒˆë¡œ ê³„ì‚° í›„ WeakMapì— ì €ì¥');
                const result = obj.process();
                cache.set(obj, result);
                return result;
            };
            
            // í…ŒìŠ¤íŠ¸
            const calc1 = new ExpensiveCalculation([1, 2, 3, 4, 5]);
            const calc2 = new ExpensiveCalculation([6, 7, 8, 9, 10]);
            
            const result1 = getCachedResult(calc1);
            const result2 = getCachedResult(calc1); // ìºì‹œì—ì„œ ë°˜í™˜
            const result3 = getCachedResult(calc2);
            
            showResult('advancedResults', `
                <h4>ğŸ—ƒï¸ WeakMap ìºì‹œ ì™„ë£Œ</h4>
                <p>ê°ì²´ë¥¼ í‚¤ë¡œ í•˜ëŠ” ìºì‹± ì‹œìŠ¤í…œì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤:</p>
                <ul>
                    <li>ê³„ì‚° 1: ${result1} (ìƒˆë¡œ ê³„ì‚°)</li>
                    <li>ê³„ì‚° 1 (ì¬ì‹¤í–‰): ${result2} (ìºì‹œì—ì„œ ë°˜í™˜)</li>
                    <li>ê³„ì‚° 2: ${result3} (ìƒˆë¡œ ê³„ì‚°)</li>
                </ul>
                <p>WeakMapì€ ê°ì²´ê°€ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ë  ë•Œ ìë™ìœ¼ë¡œ ìºì‹œë„ ì •ë¦¬ë©ë‹ˆë‹¤.</p>
            `, 'success');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ JavaScript ES6+ Lab ì´ˆê¸°í™” ì™„ë£Œ');
            
            // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey || e.metaKey) {
                    switch(e.key) {
                        case '1':
                            e.preventDefault();
                            demoArrayMethods();
                            break;
                        case '2':
                            e.preventDefault();
                            demoDestructuring();
                            break;
                        case '3':
                            e.preventDefault();
                            demoAsyncAwait();
                            break;
                        case '4':
                            e.preventDefault();
                            demoClasses();
                            break;
                    }
                }
            });
        });
    </script>
</body>
</html>